// TODO: OverridBy 全実装。
// TODO: ImplementBy 全実装。
// TODO: HideNewBy 全実装。
// TODO: HideOverrideBy 全実装。
// TODO: BeforeRun 全実装。
// TODO: AfterRun 全実装。
// TODO: テストで利用している AppDomain 生成系のヘルパーを本ちゃんコード側へ移動。GlobalDomainContext とか。ユーザーが自由に処理を書けるように、NUnit のような Attribute 制御を考え中。
// TODO: ExpressiveGenerator 効率 UP。Extract 系を Expression<TDelegate>.Compile() 使わないように（Elicit 一式）。
// TODO: ExpressiveGenerator 効率 UP。Static フィールドの参照命令（Cm）について、キャッシュを使った最適化をかける。
// TODO: ExpressiveGenerator 機能拡張。デバッグ機能強化。
// TODO: PortableScope 構文競合解決。例えば、CarryPortableScope で作成した scope に Add してないとエラーになるとか。
// TODO: LocalClass でインスタンス取得は DependencyUtil からに変更。Unity 的に。
// TODO: GlobalClass で複数メソッド上書きに対応。
// TODO: static メソッドの SetupMode.** 実装。
// TODO: 遅延署名される Assembly には対応できないと使えない。調査の必要あり。



// DOING: DSL 構文定義再考察
//        →_ に頼る構文はまずい。VB.NET、F# 等、これを特殊記号として扱う言語はしばしばある。
//        →短すぎるメソッド名は悪。
//        →Invoke、New を排除。
//        →FieldInfo へのアクセスに関しても、リフレクションを用いてアクセスする方式に。
//        →EvalAdjustState って、EvalExpression するとき必要になるんじゃないの？
//        →Increment 名がおかしい。
//        →MethodReservedWord** を DSL** に。
// DOING: ExpressiveGenerator を使って記述する DSL について現状の方針とかまとめておく。
// DOING: C# 魔改造 03 -Auto Generation Holic- みたいなエントリ書く。+ CodeDom と便利ツール… + 式木と有用なエントリ… + IL と便利ツール… + そして Cecil へ…






// DONE: LocalClassBase もたぶん必要。Generic な型に、型パラメータ関係ない処理を括りだした I/F クラスがあると便利なのが世の常。
// DONE: LocalMethod 生成メソッドの引数用デリゲート型追加。
// DONE: フィールドへの参照許可を ExpressiveMethodBodyGenerator に追加。
// DONE: ExpressiveGenerator リファクタリング。
// DONE: 2項演算子（null 比較）実装。
// DONE: If 文、Scope を導入。
// DONE: 実際の処理を呼び出すための DynamicMethod 用キャッシュ追加。
// DONE: 戻り値型、引数型の制限解除。
// DONE: 自動生成クラスのフィールドの初期化を明示するための構文導入。
// DONE: ExpressBodyBefore 処理作成。
// DONE: GlobalClass で設定クラスのメソッド呼び出す処理を拡張（インスタンス変数にキャッシュされるタイプ）。
// DONE: 引数数を汎用デリゲート型まで拡張。
// DONE: コンストラクタで自動生成クラスのフィールド初期化処理を行うよう修正。
// DONE: FieldInfo の初期化はコンストラクタでやることになりそう。
// DONE: 対象のクラスが何度も new されることを考えると、設定クラスを new して Register する一連の処理を DynamicMethod 化し、キャッシュしたほうが良い。
// DONE: Expand 系の呼び出しを整理。Expand...メソッド群は冗長。従来の Expand に加え、変数の型が分からないものを Extract として追加。
// DONE: キャッシュ用フィールドの名前変更（GlobalClass -> UNCD$<>0__Cached...）
// DONE: キャッシュ用フィールド、既にあるものを上書かないよう修正。
// DONE: コンストラクタで自動生成クラスのフィールド初期化処理を行う処理をキャッシュ。
// DONE: 匿名メソッドが完全に現在のクラスに展開される場合の対応。
// DONE: 匿名メソッドが static メソッドとして展開される場合について、処理を簡単化。
// DONE: C# 魔改造 02 -言語内 DSL- みたいなエントリ書く。+ ラムダ式が使えるようになって…。+ try ～ finally の例…。+ インターフェースと相性悪くね？…
// DONE: キャッシュ用フィールドの名前変更（LocalClass -> UND$<>0__Cached...）
// DONE: LocalClass で引数数を汎用デリゲート型まで拡張。
// DONE: GlobalClass 設定クラスキャッシュ方法修正（限定版）。
// DONE: OpCode デバッグ簡易化処理追加。
// DONE: GlobalClass 設定クラスキャッシュ方法修正（完全版）。
// DONE: IMethodBodyGenerator、IMethodBaseGenerator、ITypeGenerator、IModuleGenerator 順に CreateTemporary みたいなのが必要。
// DONE: LocalClass で匿名メソッドが完全に現在のクラスに展開される場合の対応。
// DONE: GlobalReplaceAnonymousInstanceMethodInjection の TBase って要らなくね？
// DONE: メソッドやプロパティの戻り値はできるだけ特化する、引数はできるだけ汎化するの原則適用。
// DONE: Expressible で利用できるメソッド呼び出し簡易化。特によく使うものは簡易名を利用できるように。St 系は元の代入演算子が復元しやすいように、やっぱり _.As みたいなのが入ったほうがいいね。
// DONE: Expressible で利用できるメソッド修正。スタックが導入された今となっては、基本的に Expand は必要ないはず。Extract に統一。
// DONE: フィールドの初期化も DSL な書き方ができるように（the.Field(() => value).As(_ => new SimpleType1()); みたいな）。
// DONE: LocalClass、GlobalClass のコンストラクト処理を共通化。
// DONE: コンストラクト処理共通化で作成した枠組みを使い、メソッド注入処理を再共通化。
// DONE: 置き換え前のメソッドにアクセス可能なオーバーロードの用意（GlobalClass）。
// DONE: 置き換え前のメソッドにアクセス可能なオーバーロードの用意（LocalClass）。
// DONE: Urasandesu.NAnonym.ILTools 以下の共通 I/F を拡張。Field や Parameter へのアクセス方法を統一。
// DONE: LocalClass の作成、GlobalClass の生成について、Urasandesu.NAnonym.ILTools 以下の共通 I/F を利用するよう設計変更。
// DONE: Mixin 定義名前空間を合併。
// DONE: DI → DW に名前変更。
// DONE: ソースファイル全てに Copyright を記述。
// DONE: GlobalClass のテストについて、NUnit-Addin を利用する形に修正。
// DONE: 書込処理効率アップ。GlobalClass の (Register)+Load の流れの中で、ファイルシステムへの書き込みは高々 1 回までとする。
// DONE: 書込処理効率アップ。LocalClass の (Register)+Load の流れの中で、ファイルシステムへの書き込みは高々 1 回までとする。
// DONE: ExpressiveGenerator で使う構文を再整理。通常→メタ、通常→メタメタへの引き込みをもう少しきれいに書けない？？
// DONE: ExpressibeEmitter への載せ換え
// DONE: CodeDOM を利用したサンプルの作成
// DONE: リフレクションを利用したサンプルの作成
// DONE: 動的アセンブリを利用したサンプルの作成
// DONE: Cecil を利用したサンプルの作成
// DONE: 動的メソッドを利用したサンプルの作成
// DONE: 式ツリーを利用したサンプルの作成
// DONE: ReflectiveMethodDesigner 実装
// DONE: as 演算子実装
// DONE: else if/else 文実装
// DONE: 条件 AND 演算子実装
// DONE: ビットごとの排他的OR演算子実装
// DONE: 3項条件演算子実装
// DONE: NAnonym を利用したサンプルの作成。
